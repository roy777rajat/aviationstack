# Automated Live Flight Status Notification Pipeline | Serverless Data Engineering Solution

An end-to-end, event-driven data pipeline leveraging AWS serverless services to automate retrieval, processing, and notification of real-time flight status information using the AviationStack API. This pipeline showcases best practices for building scalable, maintainable, and cost-effective data workflows with full monitoring and alerting capabilities.

---

## Project Overview

In today’s fast-paced travel and logistics sectors, timely and reliable flight status updates are critical for operational efficiency, customer satisfaction, and decision-making. This project demonstrates how to architect and implement a serverless data pipeline that continuously fetches live flight information and pushes formatted email notifications to stakeholders.

The pipeline is designed to be:

- **Automated**: No manual intervention needed; fully scheduled execution.
- **Scalable**: Built on AWS managed services to handle varying loads.
- **Secure**: Sensitive API keys stored in AWS Secrets Manager.
- **Observable**: Execution logs and metrics captured for monitoring.
- **Maintainable**: Modular code and infrastructure as code friendly.

---

## Key AWS Services & Their Roles

### AWS EventBridge (CloudWatch Events)
- **Role:** Acts as a highly reliable, serverless scheduler to trigger workflows on a fixed time interval (e.g., every hour).
- **Why:** Ensures the Lambda function runs automatically without manual triggers or external cron jobs.
- **Benefit:** Reduces operational overhead and enables precise timing for data pipeline executions.

### AWS Lambda
- **Role:** The core compute service that runs the flight data retrieval and notification logic in response to EventBridge triggers.
- **Why:** Provides a fully managed, scalable, and cost-efficient compute layer with no server management.
- **Benefit:** Enables rapid development and deployment of modular data processing functions, scaling automatically with usage.

### AWS Simple Notification Service (SNS) / Simple Email Service (SES)
- **Role:** SNS is used to send email notifications with the formatted flight status information. SES can also be integrated for direct email sending.
- **Why:** Decouples the notification mechanism from the data processing, allowing for reliable, asynchronous message delivery.
- **Benefit:** Simplifies communication with stakeholders by handling email delivery, retries, and failures gracefully.

### AWS CloudWatch Logs
- **Role:** Captures all logs generated by the Lambda execution for monitoring, debugging, and auditing.
- **Why:** Provides centralized observability into the data pipeline’s health and performance.
- **Benefit:** Helps data engineers proactively detect issues and understand system behavior in production.

---

## How the Pipeline Works - Step-by-Step

1. **Scheduling**  
   EventBridge triggers the Lambda function on a defined schedule (e.g., hourly).

2. **Data Retrieval**  
   Lambda securely fetches the AviationStack API key from AWS Secrets Manager and calls the API to get live flight status data.

3. **Data Processing & Formatting**  
   The raw flight data is parsed and formatted into a professional HTML email report.

4. **Notification Delivery**  
   The email report is sent via AWS SNS/SES to predefined recipients, ensuring timely delivery.

5. **Logging & Monitoring**  
   All steps and errors are logged in CloudWatch Logs for observability and troubleshooting.

---

## Professional Email Subject Line

To reflect the data engineering perspective and professional reporting, the subject line is dynamically generated with timestamp:

```python
from datetime import datetime
current_datetime = datetime.now().strftime("%d-%m-%Y %H:%M:%S")
subject = f"Live Flight Status Notification | Data Pipeline Update | {current_datetime}"
```

---

## Example Lambda Email Sending Snippet

```python
import boto3
from datetime import datetime

def lambda_handler(event, context):
    current_datetime = datetime.now().strftime("%d-%m-%Y %H:%M:%S")
    subject = f"Live Flight Status Notification | Data Pipeline Update | {current_datetime}"

    sender = "sender@example.com"
    recipients = ["recipient1@example.com", "recipient2@example.com"]
    region = "eu-west-1"

    # Generate HTML body here (omitted for brevity)

    ses = boto3.client('ses', region_name=region)

    try:
        response = ses.send_email(
            Source=sender,
            Destination={'ToAddresses': recipients},
            Message={
                'Subject': {'Data': subject, 'Charset': 'UTF-8'},
                'Body': {
                    'Text': {'Data': 'Fallback plain text message', 'Charset': 'UTF-8'},
                    'Html': {'Data': body_html, 'Charset': 'UTF-8'}
                }
            }
        )
        print(f"Email sent at {current_datetime}")
        return {'statusCode': 200, 'body': f"Email sent! Message ID: {response['MessageId']}"}

    except Exception as e:
        return {'statusCode': 500, 'body': f"Error sending email: {str(e)}"}
```

---

## Deployment & Configuration Steps

1. **Store API Key Securely**  
   Use AWS Secrets Manager to store your AviationStack API key and configure Lambda to retrieve it at runtime.

2. **Configure IAM Permissions**  
   - Lambda needs permissions for:
     - Secrets Manager (`secretsmanager:GetSecretValue`)
     - SES/SNS (`ses:SendEmail` or `sns:Publish`)
     - CloudWatch Logs (`logs:CreateLogGroup`, `logs:CreateLogStream`, `logs:PutLogEvents`)

3. **Create and Deploy Lambda Function**  
   Upload your code and set environment variables for region, email addresses, and secret names.

4. **Create EventBridge Rule**  
   Define a scheduled rule (e.g., cron expression) to invoke the Lambda periodically.

5. **Test & Validate**  
   Manually trigger Lambda or wait for schedule, confirm emails are received and logs appear in CloudWatch.

---

## Benefits for Data Engineering and Business

- **Automation** eliminates manual reporting, saving time and reducing errors.
- **Scalability** leverages serverless infrastructure that scales automatically.
- **Reliability** is ensured through managed services with built-in retries and monitoring.
- **Security** via AWS Secrets Manager safeguards API credentials.
- **Observability** through centralized logs enhances operational visibility.
- **Timely insights** empower stakeholders with up-to-date flight data for decision-making.

---

## Useful Resources

- [AviationStack API Documentation](https://aviationstack.com/documentation)
- [AWS Lambda Developer Guide](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html)
- [AWS EventBridge User Guide](https://docs.aws.amazon.com/eventbridge/latest/userguide/what-is-amazon-eventbridge.html)
- [AWS SES Developer Guide](https://docs.aws.amazon.com/ses/latest/dg/send-email.html)
- [AWS Secrets Manager Guide](https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html)
- [AWS CloudWatch Logs Guide](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html)

---

## Author & Contact

Rajat Roy  
[GitHub](https://github.com/roy777rajat) | [LinkedIn](https://www.linkedin.com/in/royrajat/) | [Medium](https://medium.com/@uk.rajatroy)

---

*This pipeline serves as a real-world example of modern serverless data engineering practices, combining automation, security, and observability to deliver actionable flight status notifications.*
